<template>
	<view class="content">
		<view class="header-section">
			<image class="logo" src="/static/logo.png"></image>
			<view class="title-text">æ¬¢è¿ä½¿ç”¨å¤©æ´¥å¤§å­¦æœºæ¢°å·¥ç¨‹å­¦é™¢<br/>å·¥ä¸šè®¾è®¡å®éªŒå®¤é¢„çº¦ç³»ç»Ÿ</view>
		</view>
		<view class="login-section">
			<view class="login-form">
				<view class="form-title">ç™»å½•</view>
				<view class="input-group">
					<input type="text" v-model="form.username" placeholder="å­¦å·/å·¥å·" class="input-field" />
					<view class="password-container">
						<input :type="showPassword ? 'text' : 'password'" v-model="form.password" placeholder="å¯†ç " class="input-field" />
						<text class="password-toggle" @click="togglePassword">ğŸ‘</text>
					</view>
				</view>
				<view class="forgot-password">
					<text class="link" @click="handleForgotPassword">å¿˜è®°å¯†ç </text>
				</view>
				<button class="login-btn" @click="handleLogin">ç™»å½•</button>
				<view class="register-link">
					<text>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»</text>
					<text class="link" @click="goToRegister">æ³¨å†Œ</text>
				</view>
			</view>
		</view>
	</view>
</template>

<script>
export default {
	data() {
		return {
			form: {
				username: '',
				password: ''
			},
			showPassword: false
		}
	},
	methods: {
		handleLogin() {
			// æ¨¡æ‹Ÿç™»å½•æˆåŠŸ
			if (this.form.username && this.form.password) {
				// å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥è°ƒç”¨ç™»å½•API
				uni.showToast({
					title: 'ç™»å½•æˆåŠŸ',
					icon: 'success'
				})
				// ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ
				setTimeout(() => {
					uni.switchTab({
						url: '/pages/home/home'
					})
				}, 1500)
			} else {
				uni.showToast({
					title: 'è¯·è¾“å…¥è´¦å·å’Œå¯†ç ',
					icon: 'none'
				})
			}
		},
		handleForgotPassword() {
			uni.showModal({
				title: 'å¿˜è®°å¯†ç ',
				content: 'è¯·è”ç³»ç®¡ç†å‘˜é‡ç½®å¯†ç ',
				confirmText: 'ç¡®å®š',
				confirmColor: '#6D45B8',
				showCancel: false,
				success: function (res) {
					if (res.confirm) {
						console.log('ç”¨æˆ·ç‚¹å‡»ç¡®å®š');
					}
				}
			});
		},
		goToRegister() {
			uni.navigateTo({
				url: '/pages/register/register'
			})
		},
		togglePassword() {
			this.showPassword = !this.showPassword
		}
	}
}
</script>

<style>
.content {
    display: flex;
    flex-direction: column;
    height: 100vh;
}

.header-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40rpx 30rpx;
    background-color: #D9D9D9;
}
.login-section {
    flex: 1;
    background-color: #fff;
    border-radius: 40rpx 40rpx 0 0;
    margin-top: -20rpx;
    padding: 30rpx 30rpx 20rpx;
    z-index: 1;
    display: flex;
    flex-direction: column;
}
.logo {
	width: 120rpx;
	height: 120rpx;
	margin-top: 60rpx;
	margin-bottom: 20rpx;
}
.title-text {
	font-family: Inika;
	font-weight: 700;
	font-size: 18px;
	line-height: 30px;
	letter-spacing: -1.5%;
	text-align: center;
	color: #333;
	margin-bottom: 40rpx;
}
.login-form {
	width: 100%;
	flex: 1;
	display: flex;
	flex-direction: column;
}
.form-title {
	font-size: 36rpx;
	font-weight: bold;
	color: #333;
	margin: 100rpx 0 60rpx;
}
.input-group {
	width: 100%;
}
.input-field {
	width: 100%;
	height: 90rpx;
	background: #fff;
	border-bottom: 1px solid #eee;
	padding: 0 20rpx;
	margin-bottom: 20rpx;
	font-size: 28rpx;
}
.password-container {
	position: relative;
}
.password-toggle {
	position: absolute;
	right: 20rpx;
	top: 50%;
	transform: translateY(-50%);
	color: #999;
	font-size: 40rpx;
}
.login-btn {
	width: 100%;
	height: 90rpx;
	line-height: 90rpx;
	background: #6D45B8;
	color: #fff;
	border-radius: 45rpx;
	margin-top: 60rpx;
	font-size: 32rpx;
}
.register-link {
    display: flex;
    justify-content: center;
    margin-top: 40rpx;
    margin-bottom: 20rpx;
    font-size: 28rpx;
    color: #999;
}
.forgot-password {
    display: flex;
    justify-content: flex-end;
    margin-top: 20rpx;
    font-size: 28rpx;
}
.link {
	color: #6D45B8;
	margin-left: 10rpx;
}
</style>